# Feature Specification: TradeVision AI 기반 주식 차트 분석 학습 플랫폼

**Feature Branch**: `feature/tradevision-platform`
**Created**: 2025-11-16
**Status**: Draft
**Input**: User description: "AI 기반 주식 차트 분석 학습 플랫폼 - 초보 투자자가 차트 분석 기법을 학습하고, AI를 활용해 실전 투자 의사결정을 지원받을 수 있는 통합 플랫폼"

## User Scenarios & Testing *(mandatory)*

### User Story 1 - 회원가입 및 인증 시스템 (Priority: P1)

초보 투자자가 TradeVision 플랫폼에 회원가입하고 로그인하여 개인화된 학습 경험과 분석 히스토리를 저장할 수 있습니다.

**Why this priority**: 모든 개인화 기능(학습 진도, 분석 히스토리)의 기반이 되는 필수 기능입니다. 사용자 인증 없이는 데이터 저장 및 관리가 불가능합니다.

**Independent Test**: 회원가입 페이지에서 이메일/비밀번호를 입력하고 계정 생성 후 로그인하여 대시보드 접근 가능 여부로 독립적 테스트 가능합니다.

**Acceptance Scenarios**:

1. **Given** 신규 사용자가 회원가입 페이지에 접근, **When** 유효한 이메일, 비밀번호(8자 이상, 영문+숫자 조합), 닉네임을 입력하여 제출, **Then** 계정이 생성되고 "회원가입 성공" 메시지와 함께 로그인 페이지로 리다이렉트
2. **Given** 등록된 사용자가 로그인 페이지에 접근, **When** 올바른 이메일과 비밀번호 입력, **Then** JWT 토큰이 발급되고 사용자 대시보드로 이동
3. **Given** 로그인한 사용자, **When** 보호된 API 엔드포인트 호출, **Then** JWT 토큰 검증 후 요청 처리
4. **Given** 사용자가 잘못된 비밀번호 입력, **When** 로그인 시도, **Then** "이메일 또는 비밀번호가 올바르지 않습니다" 에러 메시지 표시
5. **Given** 이미 존재하는 이메일로 회원가입 시도, **When** 제출, **Then** "이미 사용 중인 이메일입니다" 에러 메시지 표시

---

### User Story 2 - 실시간 주식 데이터 조회 (Priority: P1)

사용자가 종목 코드를 입력하면 한국투자증권 OpenAPI를 통해 실시간 차트 데이터를 조회하고 다양한 시간봉(1분/5분/15분/60분/일/주/월봉)으로 차트를 확인할 수 있습니다.

**Why this priority**: 플랫폼의 핵심 기능인 차트 분석의 전제 조건입니다. 실시간 데이터 없이는 AI 분석 및 학습이 불가능합니다.

**Independent Test**: 종목 코드 입력 필드에 "005930"(삼성전자) 입력 후 "일봉" 선택 시 최근 120일간의 일봉 차트가 표시되는지 확인하여 독립적 테스트 가능합니다.

**Acceptance Scenarios**:

1. **Given** 로그인한 사용자가 대시보드에 접근, **When** 종목 코드 "005930" 입력 후 "일봉" 선택, **Then** 삼성전자의 최근 120일 일봉 차트가 캔들스틱으로 표시되고 현재가, 거래량, 등락률 정보 표시
2. **Given** 차트가 표시된 상태, **When** 시간봉을 "1분봉"으로 변경, **Then** 최근 60개의 1분봉 데이터가 새로 로드되어 차트 업데이트
3. **Given** 사용자가 종목 코드 입력, **When** 존재하지 않는 종목 코드 입력, **Then** "유효하지 않은 종목 코드입니다" 에러 메시지 표시
4. **Given** 한국투자증권 API 호출 중, **When** API 서버 응답 실패 (timeout 또는 5xx 에러), **Then** 3회 재시도 후 실패 시 "주식 데이터를 불러오는데 실패했습니다. 잠시 후 다시 시도해주세요" 메시지 표시
5. **Given** 차트 데이터 로딩 중, **When** 로딩 진행 중, **Then** 로딩 스피너 표시 및 "데이터를 불러오는 중입니다..." 메시지 표시

---

### User Story 3 - 봉 종류별 최적 매매기법 추천 (Priority: P2)

사용자가 특정 시간봉을 선택하면 자동으로 해당 봉 종류에 최적화된 매매기법을 추천하는 알림창이 표시되어 초보자가 어떤 분석 기법을 사용해야 할지 가이드를 받습니다.

**Why this priority**: 초보 투자자의 학습 곡선을 크게 낮추는 핵심 차별화 기능입니다. 차트를 보는 것만으로는 어떤 기법을 적용해야 할지 모르는 초보자에게 큰 도움이 됩니다.

**Independent Test**: "1분봉" 선택 시 "스캘핑, 단기 RSI, 단기 이동평균선 크로스" 추천 알림이 표시되고, 각 기법 클릭 시 상세 설명 모달이 열리는지 확인하여 독립적 테스트 가능합니다.

**Acceptance Scenarios**:

1. **Given** 사용자가 차트 조회 페이지에서 시간봉 선택 드롭다운 클릭, **When** "1분봉" 선택, **Then** "1분봉에 적합한 매매기법: 스캘핑, 단기 RSI, 단기 이동평균선 크로스" 알림창이 3초간 표시
2. **Given** "일봉" 선택 시 표시된 알림창, **When** "피보나치 되돌림" 기법 클릭, **Then** 피보나치 되돌림의 개념, 계산 방법, 활용 전략을 설명하는 모달 팝업
3. **Given** "주봉" 선택, **When** 차트 로드 완료, **Then** "주봉에 적합한 매매기법: 중기 추세 분석, 주요 이동평균선, 패턴 분석" 알림창 표시
4. **Given** 알림창이 표시된 상태, **When** 사용자가 "다시 보지 않기" 체크박스 선택 후 닫기, **Then** 해당 봉 종류에 대한 알림창은 향후 표시되지 않음 (로컬 스토리지 저장)
5. **Given** "60분봉" 선택, **When** 알림창의 "학습 페이지로 이동" 버튼 클릭, **Then** 해당 기법들이 포함된 학습 페이지로 이동

---

### User Story 4 - 차트 이미지 업로드 및 AI 분석 (Priority: P1)

사용자가 직접 캡처한 차트 이미지를 업로드하면 OpenAI GPT-4 Vision API가 차트를 분석하여 패턴, 지지/저항선, 이동평균선 배열, 거래량 분석 결과와 매수/매도 의견을 제공합니다.

**Why this priority**: 플랫폼의 핵심 가치 제안으로, AI 기반 차트 분석은 초보 투자자에게 전문가 수준의 인사이트를 제공하는 핵심 기능입니다.

**Independent Test**: JPG/PNG 차트 이미지를 업로드하면 5초 이내에 분석 결과(패턴 식별, 지지/저항선, 매수/매도 의견)가 화면에 표시되는지 확인하여 독립적 테스트 가능합니다.

**Acceptance Scenarios**:

1. **Given** 로그인한 사용자가 "AI 차트 분석" 페이지 접근, **When** "이미지 업로드" 버튼 클릭하여 유효한 PNG 차트 이미지 선택, **Then** 이미지가 업로드되고 5초 이내에 분석 결과 표시 (패턴, 지지/저항선, 이동평균선 분석, 거래량 분석, 매수/매도 의견 + 근거)
2. **Given** 차트 이미지 업로드 완료, **When** AI 분석 진행 중, **Then** "AI가 차트를 분석하고 있습니다..." 로딩 애니메이션 표시
3. **Given** 분석 결과 표시 화면, **When** 결과 확인, **Then** 식별된 패턴(예: "헤드앤숄더 형성 중"), 주요 지지선(예: "52,000원"), 저항선(예: "55,000원"), 이동평균선 배열 상태, 거래량 증감 분석, 매수/매도/관망 의견 및 구체적 근거가 시각적으로 구분되어 표시
4. **Given** 사용자가 PDF 파일 업로드 시도, **When** 파일 선택, **Then** "JPG 또는 PNG 형식의 이미지만 업로드 가능합니다" 에러 메시지 표시
5. **Given** GPT-4 Vision API 호출 중 에러 발생, **When** API 응답 실패, **Then** "AI 분석에 실패했습니다. 다시 시도해주세요" 에러 메시지 표시 및 재시도 버튼 제공
6. **Given** 분석 완료된 결과, **When** "분석 저장" 버튼 클릭, **Then** 분석 결과가 히스토리에 저장되고 "분석 결과가 저장되었습니다" 토스트 메시지 표시

---

### User Story 5 - 분석 히스토리 관리 (Priority: P2)

사용자가 과거에 수행한 AI 차트 분석 결과를 날짜별, 종목별로 조회하고 비교하며, 성공/실패 피드백을 남길 수 있습니다.

**Why this priority**: 학습 효과를 극대화하고 사용자가 자신의 투자 판단을 복기할 수 있게 하는 중요한 기능이지만, 플랫폼 사용을 위한 필수 기능은 아니므로 P2입니다.

**Independent Test**: "히스토리" 페이지에서 과거 분석 결과 목록을 확인하고, 날짜 필터를 적용하여 특정 기간의 분석 결과만 표시되는지 확인하여 독립적 테스트 가능합니다.

**Acceptance Scenarios**:

1. **Given** 로그인한 사용자가 "분석 히스토리" 페이지 접근, **When** 페이지 로드, **Then** 최근 30일간 수행한 모든 AI 차트 분석 결과가 시간 역순으로 리스트 표시 (분석 날짜, 종목명, 분석 결과 요약)
2. **Given** 히스토리 리스트 화면, **When** 날짜 필터에서 "최근 7일" 선택, **Then** 최근 7일 이내의 분석 결과만 필터링되어 표시
3. **Given** 히스토리 리스트 화면, **When** 종목명 검색 필드에 "삼성전자" 입력, **Then** 삼성전자 관련 분석 결과만 필터링되어 표시
4. **Given** 특정 분석 결과 항목, **When** 항목 클릭, **Then** 해당 분석의 상세 결과(업로드한 이미지, AI 분석 내용 전체) 모달로 표시
5. **Given** 분석 상세 화면, **When** "성공" 또는 "실패" 피드백 버튼 클릭, **Then** 피드백이 저장되고 해당 분석 항목에 피드백 태그 표시
6. **Given** 히스토리에 2개 이상의 분석 결과 존재, **When** 2개 항목 선택 후 "비교" 버튼 클릭, **Then** 두 분석 결과를 좌우로 나란히 비교할 수 있는 화면 표시

---

### User Story 6 - 차트 분석 학습 페이지 (Priority: P2)

초보 투자자가 체계적으로 기술적 분석 기법을 학습할 수 있도록 카테고리별로 분류된 학습 콘텐츠를 제공하고, 인터랙티브한 차트 예시와 함께 개념, 계산 방법, 활용 전략을 학습할 수 있습니다.

**Why this priority**: 플랫폼의 "학습" 측면을 강화하는 중요한 기능이지만, AI 분석 기능만으로도 즉각적인 가치를 제공할 수 있으므로 P2입니다.

**Independent Test**: "학습" 페이지에서 "이동평균선" 카테고리 선택 시 개념 설명, 계산 방법, 인터랙티브 차트 예시가 표시되고, 학습 완료 체크 시 진도가 저장되는지 확인하여 독립적 테스트 가능합니다.

**Acceptance Scenarios**:

1. **Given** 로그인한 사용자가 "학습" 페이지 접근, **When** 페이지 로드, **Then** 기술적 분석 기법 카테고리 목록 표시 (이동평균선, 볼린저밴드, MACD, RSI, 스토캐스틱, 피보나치 되돌림, 엘리어트 파동, 캔들 패턴)
2. **Given** 카테고리 목록 화면, **When** "이동평균선" 카테고리 클릭, **Then** 이동평균선의 개념 설명, 계산 방법, 실제 차트 예시(인터랙티브), 최적 시간봉, 활용 전략, 장단점, 다른 지표와의 조합 전략 섹션별로 표시
3. **Given** 학습 콘텐츠 화면, **When** 인터랙티브 차트 예시의 슬라이더 조작, **Then** 이동평균선 기간(예: 5일 → 20일) 변경에 따라 차트 실시간 업데이트
4. **Given** 학습 콘텐츠 완료, **When** "학습 완료" 체크박스 클릭, **Then** 학습 진도가 저장되고 카테고리 목록에서 해당 항목에 "완료" 배지 표시
5. **Given** 학습 페이지 사이드바, **When** 진도율 확인, **Then** 전체 학습 콘텐츠 중 완료한 비율이 퍼센트로 표시 (예: "8개 중 3개 완료 (37.5%)")
6. **Given** "피보나치 되돌림" 학습 중, **When** "관련 기법 보기" 링크 클릭, **Then** 함께 사용하면 좋은 기법(예: 엘리어트 파동, 지지/저항선 분석) 링크 제공

---

### User Story 7 - 사용자 프로필 관리 (Priority: P3)

사용자가 자신의 프로필 정보(닉네임, 비밀번호)를 수정하고 투자 경험 수준, 관심 종목 등을 설정하여 개인화된 학습 경로와 추천을 받을 수 있습니다.

**Why this priority**: 사용자 경험을 향상시키는 부가 기능이지만, 핵심 기능(차트 조회, AI 분석, 학습) 사용에는 필수적이지 않으므로 P3입니다.

**Independent Test**: 프로필 페이지에서 닉네임 변경 후 저장하면 대시보드의 사용자 이름이 업데이트되는지 확인하여 독립적 테스트 가능합니다.

**Acceptance Scenarios**:

1. **Given** 로그인한 사용자가 "프로필" 페이지 접근, **When** 페이지 로드, **Then** 현재 닉네임, 이메일, 투자 경험 수준, 관심 종목 정보 표시
2. **Given** 프로필 편집 화면, **When** 닉네임을 새로운 값으로 변경 후 저장, **Then** "프로필이 업데이트되었습니다" 메시지 표시 및 대시보드에 새 닉네임 반영
3. **Given** 프로필 편집 화면, **When** "비밀번호 변경" 버튼 클릭, **Then** 현재 비밀번호, 새 비밀번호, 새 비밀번호 확인 입력 필드가 있는 모달 표시
4. **Given** 비밀번호 변경 모달, **When** 올바른 현재 비밀번호와 유효한 새 비밀번호 입력 후 저장, **Then** 비밀번호 업데이트 및 "비밀번호가 변경되었습니다" 메시지 표시
5. **Given** 프로필 편집 화면, **When** 투자 경험 수준을 "초보자"로 선택, **Then** 학습 페이지에서 초보자용 추천 학습 경로가 강조 표시

---

### Edge Cases

- **대용량 차트 이미지 업로드**: 10MB 이상의 이미지 업로드 시 "이미지 크기는 5MB 이하로 제한됩니다" 에러 메시지 표시 및 업로드 차단
- **한국투자증권 API Rate Limit 초과**: 분당 API 호출 제한 초과 시 "요청 한도를 초과했습니다. 1분 후 다시 시도해주세요" 메시지 표시 및 재시도 타이머 표시
- **JWT 토큰 만료**: API 요청 중 토큰 만료 시 자동으로 리프레시 토큰 사용하여 갱신 시도, 실패 시 로그인 페이지로 리다이렉트
- **OpenAI API 비용 초과**: 일일 OpenAI API 호출 한도 도달 시 "오늘의 AI 분석 한도를 초과했습니다. 내일 다시 시도해주세요" 메시지 표시
- **동시 다발적 차트 데이터 요청**: 사용자가 빠르게 여러 종목/시간봉 변경 시 이전 요청 취소(debounce) 후 최신 요청만 처리
- **차트 이미지 없는 이미지 업로드**: GPT-4 Vision이 차트를 식별하지 못한 경우 "업로드한 이미지에서 차트를 찾을 수 없습니다. 차트 이미지를 업로드해주세요" 메시지 표시
- **네트워크 연결 끊김**: 오프라인 상태에서 API 호출 시 "인터넷 연결을 확인해주세요" 메시지 표시
- **특수 문자 종목 코드**: 종목 코드 입력 시 숫자만 허용, 특수문자 입력 시 자동 필터링
- **히스토리 페이지 대량 데이터**: 분석 히스토리가 100개 이상일 경우 페이지네이션 (20개씩) 적용
- **세션 타임아웃**: 30분간 활동 없을 시 자동 로그아웃 및 "보안을 위해 자동 로그아웃되었습니다" 메시지 표시

## Requirements *(mandatory)*

### Functional Requirements

#### 사용자 관리
- **FR-001**: 시스템은 이메일과 비밀번호(8자 이상, 영문+숫자 조합)를 사용한 회원가입 기능을 제공해야 함
- **FR-002**: 시스템은 JWT 기반 인증 메커니즘을 구현하여 Access Token과 Refresh Token을 발급해야 함
- **FR-003**: 시스템은 BCrypt 알고리즘(strength 10 이상)을 사용하여 비밀번호를 암호화하여 저장해야 함
- **FR-004**: 시스템은 사용자 프로필(닉네임, 투자 경험 수준, 관심 종목) 수정 기능을 제공해야 함
- **FR-005**: 시스템은 비밀번호 변경 시 현재 비밀번호 확인을 필수로 요구해야 함

#### 주식 데이터 조회
- **FR-006**: 시스템은 한국투자증권 OpenAPI를 통해 실시간 주식 데이터를 조회해야 함
- **FR-007**: 시스템은 7가지 시간봉(1분/5분/15분/60분/일/주/월봉) 데이터를 지원해야 함
- **FR-008**: 시스템은 각 차트 데이터에 현재가, 거래량, 등락률 정보를 포함해야 함
- **FR-009**: 시스템은 API 호출 실패 시 exponential backoff 전략으로 최대 3회 재시도해야 함
- **FR-010**: 시스템은 한국투자증권 API에 대해 connection timeout 3초, read timeout 10초를 설정해야 함

#### 봉 종류별 매매기법 추천
- **FR-011**: 시스템은 각 시간봉 선택 시 해당 봉에 최적화된 매매기법 목록을 알림창으로 표시해야 함
- **FR-012**: 시스템은 7가지 봉 종류별로 최소 3가지 이상의 매매기법을 추천해야 함
- **FR-013**: 시스템은 각 매매기법에 대한 간단한 설명을 제공해야 함
- **FR-014**: 시스템은 사용자가 "다시 보지 않기" 선택 시 해당 봉 종류의 알림을 비활성화해야 함
- **FR-015**: 시스템은 추천 기법 클릭 시 학습 페이지의 해당 섹션으로 이동하는 링크를 제공해야 함

#### AI 차트 분석
- **FR-016**: 시스템은 JPG, PNG 형식의 차트 이미지 업로드를 지원해야 함
- **FR-017**: 시스템은 업로드된 이미지를 OpenAI GPT-4 Vision API로 전송하여 분석해야 함
- **FR-018**: 시스템은 AI 분석 결과에 패턴 식별, 지지/저항선, 이동평균선 배열, 거래량 분석, 매수/매도 의견 및 근거를 포함해야 함
- **FR-019**: 시스템은 이미지 크기를 5MB 이하로 제한해야 함
- **FR-020**: 시스템은 AI 분석 응답 시간을 5초 이하로 유지해야 함
- **FR-021**: 시스템은 GPT-4 Vision API 호출 전에 이미지를 최적화(리사이징, 압축)해야 함
- **FR-022**: 시스템은 분석 완료된 결과를 사용자 히스토리에 자동 저장해야 함

#### 분석 히스토리 관리
- **FR-023**: 시스템은 각 사용자의 AI 차트 분석 결과를 시간순으로 저장해야 함
- **FR-024**: 시스템은 히스토리를 날짜 범위(최근 7일/30일/전체)로 필터링하는 기능을 제공해야 함
- **FR-025**: 시스템은 히스토리를 종목명으로 검색하는 기능을 제공해야 함
- **FR-026**: 시스템은 사용자가 분석 결과에 성공/실패 피드백을 남길 수 있어야 함
- **FR-027**: 시스템은 최대 2개의 분석 결과를 비교하는 기능을 제공해야 함
- **FR-028**: 시스템은 히스토리가 100개 이상일 경우 페이지네이션(20개/페이지)을 적용해야 함

#### 차트 분석 학습
- **FR-029**: 시스템은 최소 8개 카테고리의 기술적 분석 기법 학습 콘텐츠를 제공해야 함
- **FR-030**: 각 학습 콘텐츠는 개념 설명, 계산 방법, 실제 차트 예시, 활용 전략, 장단점을 포함해야 함
- **FR-031**: 시스템은 인터랙티브한 차트 예시(매개변수 조절 가능)를 제공해야 함
- **FR-032**: 시스템은 사용자의 학습 진도를 추적하고 저장해야 함
- **FR-033**: 시스템은 전체 학습 진도율을 퍼센트로 표시해야 함
- **FR-034**: 시스템은 관련 기법 간 링크를 제공하여 학습 네비게이션을 지원해야 함

#### 에러 핸들링 및 보안
- **FR-035**: 시스템은 모든 API 엔드포인트에서 일관된 에러 응답 형식을 반환해야 함
- **FR-036**: 시스템은 Global Exception Handler를 구현하여 예외를 중앙 집중식으로 처리해야 함
- **FR-037**: 시스템은 외부 API(한국투자증권, OpenAI) 실패 시 사용자 친화적 한국어 에러 메시지를 제공해야 함
- **FR-038**: 시스템은 SQL Injection 방지를 위해 Prepared Statement를 사용해야 함
- **FR-039**: 시스템은 XSS 방지를 위해 사용자 입력을 sanitization 해야 함
- **FR-040**: 시스템은 CORS를 명시적으로 설정하여 허용된 도메인만 API 호출을 허용해야 함

### Key Entities

- **User (사용자)**: 플랫폼 사용자를 나타내며, 이메일(unique), 암호화된 비밀번호, 닉네임, 투자 경험 수준, 관심 종목, 가입일, 최종 로그인 시간을 속성으로 가짐. AnalysisHistory, LearningProgress와 1:N 관계

- **AnalysisHistory (분석 히스토리)**: AI 차트 분석 결과를 저장하며, 사용자 ID(FK), 분석 날짜, 종목 코드, 종목명, 업로드 이미지 경로, AI 분석 결과(JSON), 사용자 피드백(성공/실패/없음)을 속성으로 가짐. User와 N:1 관계

- **LearningProgress (학습 진도)**: 사용자의 학습 진행 상황을 추적하며, 사용자 ID(FK), 학습 카테고리, 완료 여부, 완료 날짜를 속성으로 가짐. User와 N:1 관계

- **StockData (주식 데이터)**: 한국투자증권 API에서 가져온 캐시된 주식 데이터(선택적), 종목 코드, 시간봉 종류, 날짜/시간, 시가, 고가, 저가, 종가, 거래량, 조회 시간을 속성으로 가짐

- **TradingStrategy (매매 기법)**: 시간봉별 추천 매매기법 마스터 데이터, 시간봉 종류, 기법명, 설명, 학습 페이지 링크, 우선순위를 속성으로 가짐

- **LearningContent (학습 콘텐츠)**: 기술적 분석 기법 학습 자료, 카테고리명(unique), 개념 설명, 계산 방법, 활용 전략, 장단점, 인터랙티브 차트 설정(JSON), 관련 기법 ID 리스트를 속성으로 가짐

## Success Criteria *(mandatory)*

### Measurable Outcomes

- **SC-001**: 신규 사용자가 회원가입부터 첫 차트 조회까지 2분 이내에 완료할 수 있어야 함
- **SC-002**: 주식 차트 데이터 API 호출의 95% 이상이 1초 이내에 응답해야 함
- **SC-003**: AI 차트 분석의 95% 이상이 5초 이내에 완료되어야 함
- **SC-004**: 시스템은 최소 1,000명의 동시 사용자를 성능 저하 없이 처리할 수 있어야 함
- **SC-005**: 사용자의 80% 이상이 봉 종류별 매매기법 추천을 "유용하다"고 평가해야 함 (향후 설문 조사 기반)
- **SC-006**: 학습 페이지 방문 사용자의 50% 이상이 최소 1개 이상의 학습 콘텐츠를 완료해야 함
- **SC-007**: AI 차트 분석 결과의 정확도를 사용자 피드백 기반으로 측정 시 70% 이상의 "성공" 피드백을 받아야 함
- **SC-008**: 외부 API(한국투자증권, OpenAI) 장애 시에도 핵심 기능(로그인, 학습 페이지)은 계속 사용 가능해야 함
- **SC-009**: 전체 API 엔드포인트의 테스트 커버리지가 70% 이상이어야 함
- **SC-010**: 프로덕션 환경에서 시간당 에러율이 1% 이하로 유지되어야 함

### Business Metrics

- **BM-001**: 월간 활성 사용자(MAU)의 30% 이상이 주 1회 이상 AI 차트 분석을 사용해야 함
- **BM-002**: 가입 사용자의 40% 이상이 학습 페이지를 방문해야 함
- **BM-003**: 사용자당 평균 세션 시간이 10분 이상이어야 함 (학습 및 분석 활동 포함)
- **BM-004**: AI 차트 분석 사용자의 60% 이상이 분석 결과를 히스토리에 저장해야 함
- **BM-005**: 신규 가입 사용자의 70% 이상이 7일 이내에 최소 1회 이상 재방문해야 함 (리텐션)

## Non-Functional Requirements

### Performance
- **NFR-001**: API 응답 시간 P95가 1초 이하
- **NFR-002**: OpenAI Vision API 분석 시간 P95가 5초 이하
- **NFR-003**: 페이지 초기 로드 시간 3초 이하
- **NFR-004**: 데이터베이스 쿼리 응답 시간 P95가 100ms 이하

### Scalability
- **NFR-005**: 시스템은 horizontal scaling을 지원해야 함 (stateless API 서버)
- **NFR-006**: 데이터베이스 connection pool은 최소 20개 이상의 connection을 유지해야 함
- **NFR-007**: 한국투자증권 API 호출에 대해 rate limiting (분당 60회)을 구현해야 함

### Security
- **NFR-008**: 모든 API 통신은 HTTPS를 사용해야 함
- **NFR-009**: JWT Access Token 유효기간은 1시간, Refresh Token은 7일로 설정해야 함
- **NFR-010**: API Key 및 민감 정보는 환경 변수로 관리하고 코드에 하드코딩 금지
- **NFR-011**: 로그에 비밀번호, API Key 등 민감 정보를 기록하지 않아야 함

### Reliability
- **NFR-012**: 시스템 가용성(Availability)이 99% 이상이어야 함
- **NFR-013**: 외부 API 호출 실패 시 graceful degradation 전략 적용
- **NFR-014**: 데이터베이스 백업을 일일 1회 자동으로 수행해야 함

### Maintainability
- **NFR-015**: 모든 코드는 Clean Code 원칙을 준수하고 한국어 주석을 포함해야 함
- **NFR-016**: API 문서는 Swagger/OpenAPI 3.0 기반으로 자동 생성되어야 함
- **NFR-017**: 모든 에러는 구조화된 로깅(SLF4J + Logback)으로 기록되어야 함

### Usability
- **NFR-018**: 모든 UI 텍스트와 에러 메시지는 한국어로 제공되어야 함
- **NFR-019**: 모바일 화면(최소 375px)에서도 정상 동작해야 함 (반응형 디자인)
- **NFR-020**: 접근성(WCAG 2.1 Level AA) 기준을 충족해야 함

## Technical Constraints

- **Backend Framework**: Spring Boot 3.5.7, Java 17+
- **Database**: MariaDB 10.6+, UTF-8mb4 encoding
- **Frontend**: React 18+, TypeScript 권장
- **Build Tool**: Gradle 8.0+
- **External APIs**:
  - 한국투자증권 OpenAPI (REST API)
  - OpenAI GPT-4 Vision API
- **Authentication**: JWT with Spring Security
- **Test Framework**: JUnit 5, Mockito, Spring Boot Test
- **Deployment**: Docker containerization 권장

## Dependencies & Integrations

### External Services
- **한국투자증권 OpenAPI**: 실시간 주식 데이터 조회에 필수. API 키 발급 필요.
- **OpenAI API**: GPT-4 Vision을 사용한 차트 이미지 분석에 필수. API 키 및 결제 정보 필요.

### Third-Party Libraries
- **Chart.js 또는 TradingView Lightweight Charts**: 차트 렌더링
- **Axios**: HTTP 클라이언트
- **Redux 또는 Zustand**: 프론트엔드 상태 관리
- **React Hook Form**: 폼 관리 및 검증
- **HikariCP**: 데이터베이스 커넥션 풀

## Open Questions & Clarifications Needed

- **QS-001**: 한국투자증권 OpenAPI의 실시간 데이터 갱신 주기는? (예: 1초, 5초, 실시간?) → [NEEDS CLARIFICATION]
- **QS-002**: OpenAI GPT-4 Vision API 호출 비용 한도 설정 방법은? (일일 한도, 사용자당 한도 등) → [NEEDS CLARIFICATION]
- **QS-003**: 프리미엄/유료 구독 모델 고려 여부? (현재는 모든 기능 무료 가정) → [NEEDS CLARIFICATION]
- **QS-004**: 차트 이미지 저장 기간은? (영구 저장 vs 30일 후 삭제 등) → [NEEDS CLARIFICATION]
- **QS-005**: 사용자 데이터 GDPR/개인정보보호법 준수 요구사항은? → [NEEDS CLARIFICATION]
- **QS-006**: 프로덕션 환경 인프라 (AWS, GCP, Azure 등) 선택은? → [NEEDS CLARIFICATION]
- **QS-007**: 모바일 앱(iOS/Android) 개발 계획 여부? (현재는 웹 전용) → [NEEDS CLARIFICATION]

## Out of Scope (Phase 1)

다음 기능들은 이번 구현 범위에 포함되지 않으며, 향후 Phase 2 이후로 고려됩니다:

- 실시간 알림 기능 (주가 변동 알림, 패턴 감지 알림 등)
- 소셜 기능 (사용자 간 분석 공유, 커뮤니티 등)
- 백테스팅 기능 (과거 데이터로 전략 검증)
- 포트폴리오 관리 기능
- 모바일 네이티브 앱
- 다국어 지원 (영어, 중국어 등)
- 실시간 채팅 상담 기능
- 프리미엄 구독 결제 시스템

## Version History

- **v1.0.0** (2025-11-16): 초기 Feature Specification 작성
